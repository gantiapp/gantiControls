{"admdatasource":{"name":"__GANTI_PG","source":"database"},"qymparams":[],"qymschedules":[],"admcomment":null,"type":"TABLE","query":"SELECT\r\n  u.username,\r\n  u.lastname || ' ' || u.firstname AS name,\r\n  u.email,\r\n  u.createddate AS created_date,\r\n  u.createdby || ' (' || author.lastname || ' ' || author.firstname || ')' AS created_by,\r\n  CASE\r\n    WHEN u.roles LIKE '%ROLE_SUPER_ADMIN%' THEN 'Super Admin'\r\n    WHEN u.roles LIKE '%ROLE_ADMIN%' THEN 'Admin'\r\n    ELSE 'User'\r\n  END AS permission,\r\n  STRING_AGG (br.role, ' - ') AS business_roles\r\nFROM\r\n  admuser u\r\n  LEFT JOIN LATERAL (\r\n    SELECT\r\n      UNNEST (\r\n        REGEXP_MATCHES (\r\n          u.roles,\r\n          '\"(?!ROLE_ADMIN|ROLE_SUPER_ADMIN)(\\w+)\"',\r\n          'g'\r\n        )\r\n      ) AS role\r\n  ) br ON true\r\n  LEFT JOIN admuser author ON u.createdby = author.username\r\nGROUP BY\r\n  u.username,\r\n  u.lastname,\r\n  u.firstname,\r\n  u.email,\r\n  u.createddate,\r\n  u.createdby,\r\n  author.lastname,\r\n  author.firstname,\r\n  u.roles\r\nORDER BY\r\n  u.createddate desc","route":null,"method":null,"threshold":0,"qymFields":[{"qymAlerts":[],"name":"username"},{"qymAlerts":[],"name":"name"},{"qymAlerts":[],"name":"created_by"},{"qymAlerts":[],"name":"email"},{"qymAlerts":[],"name":"created_date"},{"qymAlerts":[],"name":"permission"},{"qymAlerts":[],"name":"business_roles"}],"spreadsheetUrl":null,"sheetName":null,"sheetRange":null,"submenu":null,"name":"GTI - User details","description":null,"roles":[],"exportVersion":"24.10.4","controlType":"query_manager"}