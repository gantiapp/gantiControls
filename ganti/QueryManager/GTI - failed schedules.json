{"admdatasource":{"name":"GANTI","source":"database"},"apiPagination":null,"qymparams":[],"qymschedules":[{"admuser":null,"qymScheduleOverloadParams":[],"weekdays":[],"frequencytype":1,"monthday":null,"time":"1970-01-01T23:59:00+00:00","threshold":0,"emailaddresses":"charly@ganti.io;acoquelet@auchan.fr","message":null,"payload":null,"webhookMessage":null,"messageEmptyResult":null,"admBusinessRole":null,"type":"Mail","admBugTracker":null,"exportName":null,"title":null,"emptyResultTitle":null,"admGoogleStorage":null,"datasource":null,"tableName":null,"columnsMapping":null,"purgeTable":false,"startTime":null,"endTime":null,"intervalTime":null,"admServer":null,"admWebhook":null,"serverPath":null,"sheetAppend":null,"sheetRange":null,"isActive":true,"sendEmailOnEmptyResult":false,"tableRowsLimit":null,"spreadsheetUrl":null,"sheetName":null},{"admuser":null,"qymScheduleOverloadParams":[],"weekdays":[],"frequencytype":1,"monthday":null,"time":"1970-01-01T11:46:00+00:00","threshold":0,"emailaddresses":"support@ganti.io","message":"<p>This is the list of schedules which have failed before 12:00<\/p>","payload":null,"webhookMessage":null,"messageEmptyResult":null,"admBusinessRole":null,"type":"Mail","admBugTracker":null,"exportName":null,"title":"[Auchan] failed schedules","emptyResultTitle":null,"admGoogleStorage":null,"datasource":null,"tableName":null,"columnsMapping":null,"purgeTable":false,"startTime":null,"endTime":null,"intervalTime":null,"admServer":null,"admWebhook":null,"serverPath":null,"sheetAppend":null,"sheetRange":null,"isActive":true,"sendEmailOnEmptyResult":false,"tableRowsLimit":null,"spreadsheetUrl":null,"sheetName":null},{"admuser":null,"qymScheduleOverloadParams":[],"weekdays":[],"frequencytype":1,"monthday":null,"time":"1970-01-01T07:29:00+00:00","threshold":0,"emailaddresses":"support@ganti.io","message":"<p>This is the list of schedules which have failed before 12:00<\/p>","payload":null,"webhookMessage":null,"messageEmptyResult":null,"admBusinessRole":null,"type":"Mail","admBugTracker":null,"exportName":null,"title":"[Auchan] failed schedules","emptyResultTitle":null,"admGoogleStorage":null,"datasource":null,"tableName":null,"columnsMapping":null,"purgeTable":false,"startTime":null,"endTime":null,"intervalTime":null,"admServer":null,"admWebhook":null,"serverPath":null,"sheetAppend":null,"sheetRange":null,"isActive":true,"sendEmailOnEmptyResult":false,"tableRowsLimit":null,"spreadsheetUrl":null,"sheetName":null}],"admcomment":null,"type":"TABLE","query":"with\r\n  logs as (\r\n    select\r\n     planned_at at TIME ZONE 'UTC' AT TIME ZONE 'Europe\/Paris' as planned_at_paris, *\r\n    from\r\n      admscheduleexecutionlog\r\n    where date_trunc('day',  planned_at at TIME ZONE 'UTC' AT TIME ZONE 'Europe\/Paris') = DATE_TRUNC('day', timezone ('Europe\/Paris', CURRENT_DATE))\r\n  )\r\nselect\r\n  log.id as log_id,\r\n  sch.*,\r\n  start_time as launched_at,\r\n  CASE\r\n    WHEN log.id IS NULL THEN 'FAILED ?'\r\n    WHEN error_message IS not NULL THEN error_message\r\n    ELSE 'OK'\r\n  END AS status,\r\n  execution_time,\r\n  rows_nbr\r\nfrom\r\n  v_schedules_of_the_day sch\r\n  left join logs log on log.schedule_id = sch.schedule_id and date_trunc('minute', sch.schedule_time) = date_trunc('minute', log.planned_at_paris)\r\nwhere\r\n  error_message <> ''-- or log.id is null)\r\n  AND schedule_time < timezone ('Europe\/Paris', NOW())\r\n  and control_name <> 'GTI - failed schedules'\r\norder by\r\n  schedule_time,\r\n  control_type,\r\n  control_name","route":null,"method":null,"threshold":0,"qymFields":[{"qymAlerts":[],"name":"log_id"},{"qymAlerts":[],"name":"control_id"},{"qymAlerts":[],"name":"control_type"},{"qymAlerts":[],"name":"control_name"},{"qymAlerts":[],"name":"schedule_id"},{"qymAlerts":[],"name":"type"},{"qymAlerts":[],"name":"schedule_time"},{"qymAlerts":[],"name":"interval_end"},{"qymAlerts":[],"name":"launched_at"},{"qymAlerts":[],"name":"executiontime"},{"qymAlerts":[],"name":"rowsnumber"}],"qymApiParams":[],"admMenuControl":{"admMenu":{"name":"üïëSchedules","parentAdmMenu":{"name":"üëÅ Ganti","parentAdmMenu":null}}},"spreadsheetUrl":null,"sheetName":null,"sheetRange":null,"mongodbCollection":null,"mongodbFilter":null,"mongodbProjection":null,"mongodbOptions":null,"name":"GTI - failed schedules","description":null,"roles":["ADMIN"],"exportVersion":"25.04.1","controlType":"query_manager"}