{"admdatasource":{"name":"__GANTI_PG","source":"database"},"qymparams":[],"qymschedules":[],"admcomment":null,"type":"TABLE","query":"with logs as (select application, controlname, creationdate, executiontime, rowsnumber, schedule_type from admlogquery where type = 'schedule' and date_trunc('day', creationdate) =timezone('Europe\/Paris', CURRENT_DATE)) select sch.*, creationdate as launched_at,\r\nCASE\r\n        WHEN creationdate IS NULL AND schedule_time < timezone('Europe\/Paris', NOW()) THEN 'FAILED ?'\r\n        WHEN creationdate IS NULL THEN 'NOT YET EXECUTED'\r\n        ELSE creationdate::TEXT  -- Affiche la valeur du champ executiontime quand il n'est pas nul\r\n    END AS launched_at, executiontime, rowsnumber from v_schedules_of_the_day sch\r\nleft join logs log on log.application = control_type and controlname = control_name and type = schedule_type and creationdate between schedule_time and interval_end\r\norder by schedule_time, control_type, control_name","route":null,"method":null,"threshold":0,"qymFields":[{"qymAlerts":[],"name":"control_id"},{"qymAlerts":[],"name":"control_type"},{"qymAlerts":[],"name":"control_name"},{"qymAlerts":[],"name":"schedule_id"},{"qymAlerts":[],"name":"type"},{"qymAlerts":[],"name":"schedule_time"},{"qymAlerts":[],"name":"interval_end"},{"qymAlerts":[],"name":"launched_at"},{"qymAlerts":[],"name":"executiontime"},{"qymAlerts":[],"name":"rowsnumber"}],"spreadsheetUrl":null,"sheetName":null,"sheetRange":null,"submenu":{"name":"Ganti","controlType":"query_manager"},"name":"GTI - schedules of the day with execution infos","description":null,"roles":["DEFAULT"],"exportVersion":"23.12.3","controlType":"query_manager"}
