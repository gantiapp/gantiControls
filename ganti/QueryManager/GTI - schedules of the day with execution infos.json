{"admdatasource":{"name":"__GANTI_PG","source":"database"},"qymparams":[],"qymschedules":[],"admcomment":null,"type":"TABLE","query":"with logs as (select application, controlname, creationdate, executiontime, rowsnumber, schedule_type from admlogquery where type = 'schedule' and date_trunc('day', creationdate) =timezone('Europe\/Paris', CURRENT_DATE)) select sch.*, creationdate as launched_at,\r\nCASE\r\n        WHEN executiontime IS NULL AND schedule_time < timezone('Europe\/Paris', NOW()) THEN 'FAILED ?'\r\n        WHEN executiontime IS NULL THEN 'NOT YET EXECUTED'\r\n        ELSE executiontime::TEXT  -- Affiche la valeur du champ executiontime quand il n'est pas nul\r\n    END AS executiontime, rowsnumber from v_schedules_of_the_day sch\r\nleft join logs log on log.application = control_type and controlname = control_name and type = schedule_type and creationdate between schedule_time and interval_end\r\norder by schedule_time, control_type, control_name","route":null,"method":null,"threshold":0,"qymFields":[],"spreadsheetUrl":null,"sheetName":null,"sheetRange":null,"submenu":{"name":"Ganti","controlType":"query_manager"},"name":"GTI - schedules of the day with execution infos","description":null,"roles":["DEFAULT"],"exportVersion":"23.12.3","controlType":"query_manager"}